<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Desktop World V5 — Final Ultimate</title>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<link rel="stylesheet" href="app.css">
</head>
<body>
  <div id="ui">
    <div id="topbar">
      <select id="presetSelect"><option value="neo">Neo Neon</option><option value="aurora">Aurora Dream</option><option value="sunrise">Sunrise Crystal</option></select>
      <button id="enterBtn">ENTER THE WORLD</button>
      <button id="toggleAvatar">Toggle Avatar Mode (H)</button>
      <button id="toggleVoice">Push-to-Talk (V)</button>
      <button id="recordBtn">Record Walk</button>
      <button id="openSettings">Settings</button>
      <div id="controlsNote">WASD • Mouse • E = Inspect • H = Human Mode • V = Push-to-Talk • R = Start/Stop Recording</div>
    </div>
  </div>

  <a-scene id="scene" embedded renderer="antialias: true; colorManagement: true" background="color: #02021a" effects="bloom: 0.6">
    <a-entity id="cameraRig" position="0 1.6 10">
      <a-entity id="playerCamera" camera look-controls wasd-controls="acceleration:50;fly:true">
        <a-entity cursor="rayOrigin: mouse" raycaster="objects: .clickable"></a-entity>
      </a-entity>
    </a-entity>

    <a-sky id="sky" color="#02021a"></a-sky>
    <a-entity light="type: ambient; color:#7fe6ff; intensity:0.35"></a-entity>
    <a-entity light="type: directional; color:#9ef0ff; intensity:0.9" position="-1 6 2"></a-entity>

    <a-plane id="ground" rotation="-90 0 0" width="800" height="800" material="color:#041428; metalness:0.2; roughness:0.6"></a-plane>

    <a-entity id="plaza" position="0 0 -6">
      <a-torus id="plazaRing" radius="4.2" radius-tubular="0.08" rotation="90 0 0" material="color:#3ef2ff; opacity:0.18"></a-torus>
      <a-text value="CORE PLAZA" align="center" position="0 -0.9 0" color="#9ffaff" width="6"></a-text>
    </a-entity>

    <a-entity id="shops" position="-40 0 -20"></a-entity>
    <a-entity id="islands" position="24 0 -28"></a-entity>

    <a-entity id="avatars"></a-entity>
    <a-entity id="music" sound="src: url(sounds/ambient_loop.ogg); autoplay: false; loop: true; volume: 0.18"></a-entity>
  </a-scene>

  <div id="panel" class="hidden"><h2 id="panelTitle">File</h2><div id="panelBody"></div><div id="panelButtons"><button id="previewBtn">Preview</button><button id="openFolderBtn">Open Folder</button><button id="closePanel">Close</button></div></div>

  <div id="settings" class="hidden"><h3>Visual Settings</h3><label>Particle Density: <input id="particleRange" type="range" min="0" max="3000" step="50" value="1200"></label><label>Avatar Size: <input id="avatarSize" type="range" min="0.5" max="2" step="0.1" value="1"></label><button id="closeSettings">Close</button></div>

<script src="app_v5.js"></script>
</body>
</html>
